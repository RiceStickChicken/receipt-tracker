/* Tailwind layer directives */
@import "tailwindcss";

/* Design system tokens generated from design_system.json */
:root {
  /* Colors */
  --color-primary-main: #4F7BF7;
  --color-primary-light: #7BA3F9;
  --color-primary-dark: #3A5BC7;
  --color-primary-contrast: #FFFFFF;
  --color-secondary-main: #6B7280;
  --color-secondary-light: #9CA3AF;
  --color-secondary-dark: #4B5563;
  --color-background-primary: #FFFFFF;
  --color-background-secondary: #F9FAFB;
  --color-background-tertiary: #F3F4F6;
  --color-surface-main: #FFFFFF;
  --color-surface-elevated: #FFFFFF;
  --color-surface-border: #E5E7EB;
  --color-text-primary: #111827;
  --color-text-secondary: #6B7280;
  --color-text-tertiary: #9CA3AF;
  --color-text-inverse: #FFFFFF;
  --color-success: #10B981;
  --color-warning: #F59E0B;
  --color-error: #EF4444;
  --color-info: #3B82F6;
  --color-chart-primary: #7DD3FC;
  --color-chart-secondary: #93C5FD;
  --color-chart-tertiary: #A5B4FC;
  --color-chart-accent: #FBBF24;

  /* Typography */
  --font-primary: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  --font-mono: 'SF Mono', Monaco, Inconsolata, 'Roboto Mono', Consolas, 'Courier New', monospace;
  --fs-xs: 0.75rem;
  --fs-sm: 0.875rem;
  --fs-base: 1rem;
  --fs-lg: 1.125rem;
  --fs-xl: 1.25rem;
  --fs-2xl: 1.5rem;
  --fs-3xl: 1.875rem;
  --fs-4xl: 2.25rem;
  --fw-normal: 400;
  --fw-medium: 500;
  --fw-semibold: 600;
  --fw-bold: 700;

  /* Spacing */
  --space-xs: 0.25rem;
  --space-sm: 0.5rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  --space-xl: 2rem;
  --space-2xl: 3rem;
  --space-3xl: 4rem;
  --space-4xl: 6rem;

  /* Radius */
  --radius-none: 0;
  --radius-sm: 0.125rem;
  --radius-md: 0.375rem;
  --radius-lg: 0.5rem;
  --radius-xl: 0.75rem;
  --radius-2xl: 1rem;
  --radius-full: 9999px;

  /* Shadows */
  --shadow-none: none;
  --shadow-sm: 0 1px 2px 0 rgba(0,0,0,0.05);
  --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.1),0 2px 4px -1px rgba(0,0,0,0.06);
  --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1),0 4px 6px -2px rgba(0,0,0,0.05);
  --shadow-xl: 0 20px 25px -5px rgba(0,0,0,0.1),0 10px 10px -5px rgba(0,0,0,0.04);

  /* Layout */
  --layout-sidebar-width: 240px;
  --layout-header-height: 64px;

  /* Other tokens */
  --border-thin: 1px;
  --border-medium: 2px;
  --border-thick: 4px;
  --opacity-low: 0.1;
  --opacity-medium: 0.5;
  --opacity-high: 0.8;
  --opacity-full: 1;
}

html, body, #root { height: 100%; }
body {
  margin: 0;
  font-family: var(--font-primary);
  font-size: var(--fs-base);
  background: var(--color-background-secondary);
  color: var(--color-text-primary);
  -webkit-font-smoothing: antialiased;
}

/* Sidebar */
.sidebar {
  width: var(--layout-sidebar-width);
  background: var(--color-primary-main);
  color: var(--color-text-inverse);
  padding: var(--space-lg);
  border-radius: var(--radius-xl);
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
}

.nav-item {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-md) var(--space-lg);
  font-size: var(--fs-sm);
  font-weight: var(--fw-medium);
  border-radius: var(--radius-lg);
  color: var(--color-text-inverse);
  text-decoration: none;
  transition: background .2s ease;
}
.nav-item:hover { background: rgba(255,255,255,0.10); }
.nav-item[aria-current="page"] { background: rgba(255,255,255,0.15); }

/* Card */
.card {
  background: var(--color-surface-main);
  border: 1px solid var(--color-surface-border);
  border-radius: var(--radius-xl);
  padding: var(--space-xl);
  box-shadow: var(--shadow-md);
}

/* Modal */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(17,24,39,0.45);
  backdrop-filter: blur(4px);
  display: flex;
  align-items: flex-start;
  justify-content: center;
  padding: var(--space-4xl) var(--space-xl) var(--space-xl);
  z-index: 1050;
  animation: overlayIn .25s var(--ease-out, cubic-bezier(0,0,0.2,1));
}
.modal-overlay.modal-closing { animation: overlayOut .18s var(--ease-in, cubic-bezier(0.4,0,1,1)) forwards; }
.modal-overlay.centered { align-items: center; padding: var(--space-xl); z-index: 1200; }
.modal-panel {
  width: 100%;
  max-width: 520px;
  background: var(--color-surface-main);
  border: 1px solid var(--color-surface-border);
  border-radius: var(--radius-2xl);
  box-shadow: var(--shadow-xl);
  padding: var(--space-2xl) var(--space-2xl) var(--space-xl);
  position: relative;
  animation: modalIn 0.25s var(--ease-out, cubic-bezier(0,0,0.2,1));
}
.modal-panel.modal-closing { animation: modalOut 0.18s var(--ease-in, cubic-bezier(0.4,0,1,1)) forwards; }
.modal-panel.compact { max-width: 400px; padding: var(--space-xl) var(--space-xl) var(--space-lg); }
.modal-close-btn {
  position: absolute;
  top: var(--space-md);
  right: var(--space-md);
  background: transparent;
  border: none;
  cursor: pointer;
  color: var(--color-text-secondary);
  padding: var(--space-xs);
  border-radius: var(--radius-md);
  transition: background .15s ease;
}
.modal-close-btn:hover { background: var(--color-background-tertiary); color: var(--color-text-primary); }
@keyframes modalIn { from { opacity: 0; transform: translateY(12px) scale(.98); } to { opacity: 1; transform: translateY(0) scale(1); } }
@keyframes modalOut { from { opacity:1; transform: translateY(0) scale(1);} to { opacity:0; transform: translateY(12px) scale(.98);} }
@keyframes overlayIn { from { opacity:0;} to { opacity:1;} }
@keyframes overlayOut { from { opacity:1;} to { opacity:0;} }

/* Toast */
.toast-container {
  position: fixed;
  bottom: 1.5rem;
  right: 1.5rem;
  display: flex;
  flex-direction: column;
  gap: .75rem;
  z-index: 1100;
}
.toast {
  background: var(--color-text-primary);
  color: var(--color-text-inverse);
  padding: .75rem 1rem;
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  display: flex;
  align-items: center;
  gap: .75rem;
  font-size: var(--fs-sm);
  animation: toastIn .25s ease;
}
.toast button {
  background: rgba(255,255,255,0.15);
  color: var(--color-text-inverse);
  border: none;
  padding: .35rem .65rem;
  font-size: var(--fs-xs);
  font-weight: 500;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: background .15s ease;
}
.toast button:hover { background: rgba(255,255,255,0.25); }
@keyframes toastIn { from { opacity:0; transform: translateY(8px);} to { opacity:1; transform: translateY(0);} }

/* Table action buttons hover (using attribute selector to avoid extra classes) */
button[title="View details"],
button[title="Edit"],
button[title="Delete"] { font-weight: 500; }
button[title="View details"]:hover,
button[title="Edit"]:hover,
button[title="Delete"]:hover { background: var(--color-background-tertiary); color: var(--color-text-primary); }

/* Notes truncation base */
.notes-text {
  display: inline-block;
  max-width: 240px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis; /* show ... when truncated */
  vertical-align: top;
}
/* Applied only when truncated AND actions hovered */
.notes-text.notes-fade {
  -webkit-mask-image: linear-gradient(to right, #000 70%, rgba(0,0,0,0));
          mask-image: linear-gradient(to right, #000 70%, rgba(0,0,0,0));
}

/* Receipt row hover actions */
.receipts-table tr { position: relative; }
.receipt-actions {
  position: absolute;
  top: 50%;
  right: .25rem;
  transform: translateY(-50%);
  display: flex;
  gap: .35rem;
  background: linear-gradient(to right, rgba(255,255,255,0), var(--color-surface-main) 35%);
  padding-left: .75rem;
  opacity: 0;
  pointer-events: none;
  transition: opacity .15s ease;
}
.receipts-table tr:hover .receipt-actions { opacity: 1; pointer-events: auto; }

/* Clickable row styling */
.clickable-row { cursor: pointer; }
.clickable-row:hover { background: var(--color-background-tertiary); }
.clickable-row:focus-within { outline: 2px solid var(--color-primary-light); outline-offset: -2px; }

/* Kebab menu */
.kebab-btn { border: 1px solid var(--color-surface-border); background: transparent; padding: .25rem .45rem; border-radius: var(--radius-md); cursor: pointer; font-size: var(--fs-xs); color: var(--color-text-secondary); }
.kebab-btn:hover { background: var(--color-background-tertiary); }
.kebab-menu { position: absolute; z-index: 100; top: 100%; right: 0; margin-top: .35rem; background: var(--color-surface-main); border: 1px solid var(--color-surface-border); border-radius: var(--radius-lg); box-shadow: var(--shadow-md); min-width: 140px; padding: .35rem 0; }
.kebab-menu button { width: 100%; background: transparent; border: none; text-align: left; font-size: var(--fs-xs); padding: .45rem .75rem; cursor: pointer; color: var(--color-text-secondary); }
.kebab-menu button:hover { background: var(--color-background-tertiary); color: var(--color-text-primary); }
.kebab-menu button.destructive { color: var(--color-error); }

/* Bulk selection toolbar */
.bulk-toolbar { position: sticky; bottom: 0; left: 0; right: 0; display: flex; align-items: center; gap: .75rem; padding: .75rem 1rem; background: var(--color-surface-main); border-top: 1px solid var(--color-surface-border); box-shadow: 0 -2px 4px -2px rgba(0,0,0,0.06); }
.bulk-toolbar span.count { font-size: var(--fs-sm); font-weight: 500; }
.bulk-toolbar button { font-size: var(--fs-xs); padding: .45rem .75rem; }

th.actions-col, td.actions-col { width: 140px; }

/* Utility helpers */
.scrollbar-thin::-webkit-scrollbar { width: 8px; }
.scrollbar-thin::-webkit-scrollbar-track { background: transparent; }
.scrollbar-thin::-webkit-scrollbar-thumb { background: var(--color-secondary-light); border-radius: 4px; }
